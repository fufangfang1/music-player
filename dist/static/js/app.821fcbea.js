(function(t){function e(e){for(var i,l,a=e[0],o=e[1],u=e[2],c=0,h=[];c<a.length;c++)l=a[c],Object.prototype.hasOwnProperty.call(n,l)&&n[l]&&h.push(n[l][0]),n[l]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);d&&d(e);while(h.length)h.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],i=!0,l=1;l<r.length;l++){var o=r[l];0!==n[o]&&(i=!1)}i&&(s.splice(e--,1),t=a(a.s=r[0]))}return t}var i={},n={app:0},s=[];function l(t){return a.p+"static/js/"+({about:"about"}[t]||t)+"."+{about:"c8808acc"}[t]+".js"}function a(e){if(i[e])return i[e].exports;var r=i[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.e=function(t){var e=[],r=n[t];if(0!==r)if(r)e.push(r[2]);else{var i=new Promise((function(e,i){r=n[t]=[e,i]}));e.push(r[2]=i);var s,o=document.createElement("script");o.charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.src=l(t);var u=new Error;s=function(e){o.onerror=o.onload=null,clearTimeout(c);var r=n[t];if(0!==r){if(r){var i=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",u.name="ChunkLoadError",u.type=i,u.request=s,r[1](u)}n[t]=void 0}};var c=setTimeout((function(){s({type:"timeout",target:o})}),12e4);o.onerror=o.onload=s,document.head.appendChild(o)}return Promise.all(e)},a.m=t,a.c=i,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(r,i,function(e){return t[e]}.bind(null,i));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a.oe=function(t){throw console.error(t),t};var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var d=u;s.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"101e":function(t,e,r){"use strict";r("ce53")},"1ec5":function(t,e,r){"use strict";r("75af")},"37c5":function(t,e,r){t.exports=r.p+"static/img/music-playing.22d539b4.gif"},"56d7":function(t,e,r){"use strict";r.r(e);var i=r("2b0e"),n=function(){var t,e=this,i=e._self._c;return i("div",{attrs:{id:"app"}},[e._m(0),i("el-card",{staticClass:"box-card"},[i("ul",{staticClass:"music_content"},e._l(e.typeMusicList,(function(t,r){return i("li",{key:r,staticClass:"music_name",class:{active:e.activeTypeIndex===r},on:{click:function(t){return e.changeType(r)}}},[e._v(" "+e._s(t.name)+" ")])})),0),i("div",{staticClass:"music"},[i("div",{staticClass:"music_list"},[0==e.filteredSongs.length?i("div",{staticClass:"empty-tip"},[e._v(" 当前分类暂无歌曲 ")]):e._l(e.filteredSongs,(function(t,n){return i("div",{key:t.id,staticClass:"song-item"},[i("div",{staticClass:"name-img"},[i("div",{staticClass:"song-name",on:{click:function(r){return e.playSong(t,n)}}},[e._v(" "+e._s(t.name)+" ")]),e.currentPlayingId==t.id&&e.isPlaying?i("img",{staticClass:"song-img",attrs:{src:r("37c5"),alt:"播放中"}}):e._e()]),e.currentPlayingId===t.id&&e.isPlaying?i("img",{staticClass:"play-icon",attrs:{src:r("df84"),alt:"暂停"},on:{click:function(r){return r.stopPropagation(),e.toggleSinglePlay(t)}}}):i("img",{staticClass:"play-icon",attrs:{src:r("57f5"),alt:"播放"},on:{click:function(r){return r.stopPropagation(),e.playSong(t,n)}}})])}))],2),i("div",{staticClass:"cus-btn",on:{click:e.togglePlayAllList}},[e._v(" "+e._s(e.playAllBtnText)+" ")])])]),i("el-dialog",{ref:"lyricDialog",staticClass:"lyric-dialog",attrs:{visible:e.lyricDialogVisible,title:"歌词",top:"10vh","close-on-click-modal":!1,"append-to-body":!0},on:{"update:visible":function(t){e.lyricDialogVisible=t}}},[i("el-scrollbar",{ref:"lyricScroll",staticStyle:{height:"400px",width:"100%"}},[i("div",{staticClass:"lyrics-container"},e._l((null===(t=e.currentPlayingSong)||void 0===t?void 0:t.lyrics)||[],(function(t,r){return i("p",{key:r,ref:"lyric_"+r,refInFor:!0,class:{"active-lyric":e.currentLyricIndex===r}},[e._v(" "+e._s(t.text)+" ")])})),0)])],1)],1)},s=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper"},[e("div",{staticClass:"logo"}),e("div",{staticClass:"user"},[e("img",{attrs:{src:r("cf05"),alt:""}})])])}],l=(r("d9e2"),r("14d9"),r("e9f5"),r("910d"),r("7d54"),{name:"App",data(){return{typeMusicList:[{name:"全部",lang:""},{name:"日语",lang:"jp"},{name:"汉语",lang:"ch"},{name:"英语",lang:"en"},{name:"韩语",lang:"kr"}],activeTypeIndex:0,songList:[{id:1,name:"中文歌",audioUrl:"./audio/1.mp3",lang:"ch",lyrics:[],lrcUrl:"./lrc/中文歌.lrc"},{id:2,name:"英文歌",audioUrl:"./audio/2.mp3",lang:"en",lyrics:[],lrcUrl:"./lrc/英文歌.lrc"},{id:3,name:"日文歌",audioUrl:"./audio/3.mp3",lang:"jp",lyrics:[],lrcUrl:""},{id:4,name:"韩文歌",audioUrl:"./audio/4.mp3",lang:"kr",lyrics:[],lrcUrl:""},{id:5,name:"日文歌1",audioUrl:"./audio/1.mp3",lang:"jp",lyrics:[],lrcUrl:""},{id:6,name:"中文歌2",audioUrl:"./audio/4.mp3",lang:"ch",lyrics:[],lrcUrl:""},{id:7,name:"英文2",audioUrl:"./audio/3.mp3",lang:"en",lyrics:[],lrcUrl:""},{id:8,name:"韩文歌2",audioUrl:"./audio/2.mp3",lang:"kr",lyrics:[],lrcUrl:""},{id:9,name:"韩文歌2",audioUrl:"./audio/2.mp3",lang:"kr",lyrics:[],lrcUrl:""},{id:10,name:"韩文歌2",audioUrl:"./audio/2.mp3",lang:"kr",lyrics:[],lrcUrl:""}],currentPlayingId:null,currentPlayingSong:null,currentPlayIndex:-1,isPlaying:!1,currentTime:0,duration:0,playMode:"list",playAllBtnText:"播放列表全部",audio:null,audioErrorHandler:null,currentLyricIndex:-1,lyricDialogVisible:!0}},mounted(){this.audio=new Audio,this.audio.addEventListener("ended",this.handlePlayEnd),this.audio.addEventListener("timeupdate",this.handleTimeUpdate),console.log("纯JS音频对象初始化完成"),localStorage.removeItem("musicPlayerSongs")},beforeDestroy(){this.audio&&(this.audio.removeEventListener("ended",this.handlePlayEnd),this.audio.removeEventListener("timeupdate",this.handleTimeUpdate),this.removeAudioErrorListener(),this.audio.pause(),this.audio.src="")},computed:{filteredSongs(){const t=this.typeMusicList[this.activeTypeIndex].lang;return this.songList.filter(e=>""===t||e.lang===t)}},methods:{parseLrc(t){if(!t)return[];const e=t.split("\n").filter(t=>t.trim()&&t.startsWith("[00:")),r=/\[(\d{2}):(\d{2})\.(\d{2,3})\]\s*(.+)/g,i=[];return e.forEach(t=>{const e=r.exec(t);if(e){const[,t,r,n,s]=e,l=60*Number(t)+Number(r)+Number(n)/1e3;s.trim()&&i.push({time:l,text:s.trim()})}}),console.log("解析后的歌词：",i),i},loadLrc(t){return t.lrcUrl?fetch(t.lrcUrl).then(t=>{if(!t.ok)throw new Error("歌词加载失败："+t.status);return t.text()}).then(t=>this.parseLrc(t)).catch(e=>(console.error(`加载${t.name}歌词失败：`,e),[])):Promise.resolve([])},changeType(t){this.activeTypeIndex=t,this.stopAllPlay(),this.playAllBtnText="播放列表全部"},togglePlayAllList(){const t=this.filteredSongs;0!==t.length?this.isPlaying&&"list"===this.playMode?(this.audio.pause(),this.isPlaying=!1,this.playAllBtnText="播放列表全部"):(this.playMode="list",this.playSong(t[0],0),this.playAllBtnText="暂停列表全部"):this.$message.warning("当前分类暂无歌曲！")},playSong(t,e){this.audio&&(this.audio.pause(),this.removeAudioErrorListener()),this.currentPlayingId=t.id,this.currentPlayingSong=t,this.currentPlayIndex=e,this.currentLyricIndex=-1,this.loadLrc(t).then(e=>{this.$set(this.currentPlayingSong,"lyrics",e),this.lyricDialogVisible=e.length>0,console.log(`《${t.name}》歌词加载完成，数量：${e.length}`)}),this.audio.src=t.audioUrl,this.audio.load(),this.audioErrorHandler=e=>{this.$message.error(`音频播放失败：${t.name}（文件不存在或格式错误）`),console.error("音频错误：",e),this.isPlaying=!1},this.audio.addEventListener("error",this.audioErrorHandler),this.audio.onloadedmetadata=()=>{this.duration=this.audio.duration;const e=()=>{this.audio.play().then(()=>{this.isPlaying=!0,this.playAllBtnText="list"===this.playMode?"暂停列表全部":"播放列表全部",console.log(`《${t.name}》开始播放，时长：${this.formatTime(this.duration)}`)}).catch(e=>{"NotAllowedError"===e.name?(this.isPlaying=!1,this.$message.info(`《${t.name}》自动播放失败，请点击歌曲旁的播放图标手动播放`)):this.$message.error("播放失败："+e.message),console.error("播放错误：",e)})};setTimeout(e,50)}},toggleSinglePlay(t){this.currentPlayingId===t.id?this.isPlaying?(this.audio.pause(),this.isPlaying=!1,this.playAllBtnText=(this.playMode,"播放列表全部")):this.audio.play().then(()=>{this.isPlaying=!0,this.playAllBtnText="list"===this.playMode?"暂停列表全部":"播放列表全部"}).catch(t=>{this.$message.error("恢复播放失败："+t.message)}):this.playSong(t,this.filteredSongs.findIndex(e=>e.id===t.id))},handleTimeUpdate(){if(!this.isPlaying||!this.currentPlayingSong)return;this.currentTime=this.audio.currentTime;const t=this.currentPlayingSong.lyrics||[];if(0===t.length)return;let e=-1;const r=this.currentTime;for(let i=0;i<t.length;i++){const n=t[i].time,s=i<t.length-1?t[i+1].time:1/0;if(r>=n-.2&&r<s){e=i;break}}-1!==e&&e!==this.currentLyricIndex&&(this.currentLyricIndex=e,this.$nextTick(()=>{var t,r;const i=null===(t=this.$refs["lyric_"+e])||void 0===t?void 0:t[0],n=(null===(r=this.$refs.lyricScroll)||void 0===r?void 0:r.wrap)||(null===i||void 0===i?void 0:i.parentElement);if(i&&n){const t=i.offsetTop-n.clientHeight/2+i.offsetHeight/2;n.scrollTo({top:t,behavior:"smooth"})}}))},handlePlayEnd(){this.isPlaying=!1;const t=this.filteredSongs;if("list"===this.playMode&&t.length>0){const e=(this.currentPlayIndex+1)%t.length;this.playSong(t[e],e)}else this.stopAllPlay(),this.playAllBtnText="播放列表全部"},stopAllPlay(){this.audio&&(this.audio.pause(),this.audio.src="",this.removeAudioErrorListener()),this.isPlaying=!1,this.currentPlayingId=null,this.currentPlayingSong=null,this.currentPlayIndex=-1,this.currentLyricIndex=-1,this.lyricDialogVisible=!1,this.currentTime=0,this.duration=0},removeAudioErrorListener(){this.audio&&this.audioErrorHandler&&(this.audio.removeEventListener("error",this.audioErrorHandler),this.audioErrorHandler=null)},formatTime(t){if(!t||isNaN(t))return"00:00";const e=Math.floor(t/60).toString().padStart(2,"0"),r=Math.floor(t%60).toString().padStart(2,"0");return`${e}:${r}`}}}),a=l,o=(r("1ec5"),r("6470"),r("2877")),u=Object(o["a"])(a,n,s,!1,null,"7416e824",null),c=u.exports,d=r("8c4f"),h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("img",{attrs:{alt:"Vue logo",src:r("cf05")}}),e("HelloWorld",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},g=[],p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"hello"},[e("h1",[t._v(t._s(t.msg))]),t._m(0),e("h3",[t._v("Installed CLI Plugins")]),t._m(1),e("h3",[t._v("Essential Links")]),t._m(2),e("h3",[t._v("Ecosystem")]),t._m(3)])},m=[function(){var t=this,e=t._self._c;return e("p",[t._v(" For a guide and recipes on how to configure / customize this project,"),e("br"),t._v(" check out the "),e("a",{attrs:{href:"https://cli.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vue-cli documentation")]),t._v(". ")])},function(){var t=this,e=t._self._c;return e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel",target:"_blank",rel:"noopener"}},[t._v("babel")])]),e("li",[e("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-router",target:"_blank",rel:"noopener"}},[t._v("router")])]),e("li",[e("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint",target:"_blank",rel:"noopener"}},[t._v("eslint")])])])},function(){var t=this,e=t._self._c;return e("ul",[e("li",[e("a",{attrs:{href:"https://vuejs.org",target:"_blank",rel:"noopener"}},[t._v("Core Docs")])]),e("li",[e("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("Forum")])]),e("li",[e("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("Community Chat")])]),e("li",[e("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank",rel:"noopener"}},[t._v("Twitter")])]),e("li",[e("a",{attrs:{href:"https://news.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("News")])])])},function(){var t=this,e=t._self._c;return e("ul",[e("li",[e("a",{attrs:{href:"https://router.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vue-router")])]),e("li",[e("a",{attrs:{href:"https://vuex.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vuex")])]),e("li",[e("a",{attrs:{href:"https://github.com/vuejs/vue-devtools#vue-devtools",target:"_blank",rel:"noopener"}},[t._v("vue-devtools")])]),e("li",[e("a",{attrs:{href:"https://vue-loader.vuejs.org",target:"_blank",rel:"noopener"}},[t._v("vue-loader")])]),e("li",[e("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank",rel:"noopener"}},[t._v("awesome-vue")])])])}],v={name:"HelloWorld",props:{msg:String}},f=v,y=(r("101e"),Object(o["a"])(f,p,m,!1,null,"5141a303",null)),A=y.exports,b={name:"Home",components:{HelloWorld:A}},_=b,x=Object(o["a"])(_,h,g,!1,null,null,null),P=x.exports;i["default"].use(d["a"]);const k=[{path:"/",name:"Home",component:P},{path:"/about",name:"About",component:()=>r.e("about").then(r.bind(null,"f820"))}],C=new d["a"]({mode:"history",base:"",routes:k});var S=C,E=r("5c96"),j=r.n(E);r("0fae");i["default"].config.productionTip=!1,i["default"].use(j.a),new i["default"]({router:S,render:t=>t(c)}).$mount("#app")},"57f5":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAANFJREFUOE+tk10OATEUhc8xwuvshCURG2AHrIANCEtiJzwS48idtM3VjIiOPjSdzD1fz/0p0XOxSy9pC2CZ/duRXOXxbwBJEwAnAEcAC5JPE0gaANgDmAGYkjxHUAI48Zjk/YOzEYCbh3iAACSxpKFBSD48TFILIdlq2y3kXJOcx2BJBrS1JrnJIAcAF6tJBFhwFXMO0AiwzyvJ2sGtJo25SIB47nCQLvcx5vC/gL4p2OCUF9EVzbexCm1svrYxAOIUlg1SBvl9lDObZY+p5GW/AG+GnhFiaX+HAAAAAElFTkSuQmCC"},6470:function(t,e,r){"use strict";r("737d")},"737d":function(t,e,r){},"75af":function(t,e,r){},ce53:function(t,e,r){},cf05:function(t,e,r){t.exports=r.p+"static/img/logo.82b9c7a5.png"},df84:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAaNJREFUWEfNl7suRkEQx3//AjWRUEuIN3CJy1dplKj03sAlkSgkEpc30KtQalRucXkDIVGTCLVPMbLJHjn2OzeOWNvuzsxvZmdmZ0Xkpcj2qQxgZu7sBDANjAD9QKd34BW4B66AI+BMklVxrhTAG54BNoCBKkqBO2AVOCwDKQQwsz5gDxiuaDg8dg3MS3rIk88FMLMGsA90/9B4IvYMzEk6ydKTCeCNHwNtNY0n4u/AVBZEC4AP+80veB6yu0gMhdfxBcAn3GWNOy8LmMuJ0XRihgCz/t7LFNXZd/lwkCj4BPDe3xaUWhNYA3YlubpvWWbm+sICsA6051C6Eh1MopAGmAQyM9UrWpG0VcV1M1sGNgvONiSduv00wDawWCDUled5KOMj8VKga0fSUghwDozlNgyptGumZc2sqBVfSBoPAR6Bnj8CeJLUGwK8FSQO+t0INCV1/DuA6FcQPQmjl2H0RuTqPF4rdiVhZvEeIw/gohDvOfYQbg6MM5AkbTjqSBZAxBlKUxDxxvIUhEvMOB+T4H2P8zWrMoLVOfOtKaeOoTzZD7j63iFkmgaFAAAAAElFTkSuQmCC"}});