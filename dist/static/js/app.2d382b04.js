(function(i){function t(t){for(var e,n,s=t[0],o=t[1],c=t[2],d=0,h=[];d<s.length;d++)n=s[d],Object.prototype.hasOwnProperty.call(l,n)&&l[n]&&h.push(l[n][0]),l[n]=0;for(e in o)Object.prototype.hasOwnProperty.call(o,e)&&(i[e]=o[e]);u&&u(t);while(h.length)h.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var i,t=0;t<a.length;t++){for(var r=a[t],e=!0,n=1;n<r.length;n++){var o=r[n];0!==l[o]&&(e=!1)}e&&(a.splice(t--,1),i=s(s.s=r[0]))}return i}var e={},l={app:0},a=[];function n(i){return s.p+"static/js/"+({about:"about"}[i]||i)+"."+{about:"c8808acc"}[i]+".js"}function s(t){if(e[t])return e[t].exports;var r=e[t]={i:t,l:!1,exports:{}};return i[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(i){var t=[],r=l[i];if(0!==r)if(r)t.push(r[2]);else{var e=new Promise((function(t,e){r=l[i]=[t,e]}));t.push(r[2]=e);var a,o=document.createElement("script");o.charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.src=n(i);var c=new Error;a=function(t){o.onerror=o.onload=null,clearTimeout(d);var r=l[i];if(0!==r){if(r){var e=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;c.message="Loading chunk "+i+" failed.\n("+e+": "+a+")",c.name="ChunkLoadError",c.type=e,c.request=a,r[1](c)}l[i]=void 0}};var d=setTimeout((function(){a({type:"timeout",target:o})}),12e4);o.onerror=o.onload=a,document.head.appendChild(o)}return Promise.all(t)},s.m=i,s.c=e,s.d=function(i,t,r){s.o(i,t)||Object.defineProperty(i,t,{enumerable:!0,get:r})},s.r=function(i){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},s.t=function(i,t){if(1&t&&(i=s(i)),8&t)return i;if(4&t&&"object"===typeof i&&i&&i.__esModule)return i;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:i}),2&t&&"string"!=typeof i)for(var e in i)s.d(r,e,function(t){return i[t]}.bind(null,e));return r},s.n=function(i){var t=i&&i.__esModule?function(){return i["default"]}:function(){return i};return s.d(t,"a",t),t},s.o=function(i,t){return Object.prototype.hasOwnProperty.call(i,t)},s.p="",s.oe=function(i){throw console.error(i),i};var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var u=c;a.push([0,"chunk-vendors"]),r()})({0:function(i,t,r){i.exports=r("56d7")},"023e":function(i,t,r){},"0c48":function(i,t,r){"use strict";r("023e")},"37c5":function(i,t,r){i.exports=r.p+"static/img/music-playing.22d539b4.gif"},"4dd1":function(i,t,r){"use strict";r("7236")},"56d7":function(i,t,r){"use strict";r.r(t);var e=r("2b0e"),l=function(){var i,t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[t._m(0),e("el-card",{staticClass:"box-card"},[e("div",{staticStyle:{display:"flex","justify-content":"center"}},[e("img",{staticClass:"title_img",attrs:{src:r("a78a")}})]),e("ul",{staticClass:"music_content"},t._l(t.typeMusicList,(function(i,r){return e("li",{key:r,staticClass:"music_name",class:{active:t.activeTypeIndex===r},on:{click:function(i){return t.changeType(r)}}},[t._v(" "+t._s(i.name)+" ")])})),0),e("div",{staticClass:"music"},[e("div",{staticClass:"music_list"},[0==t.filteredSongs.length?e("div",{staticClass:"empty-tip"},[t._v(" 現在のカテゴリーに曲がありません ")]):t._l(t.filteredSongs,(function(i,l){return e("div",{key:i.id,staticClass:"song-item"},[e("div",{staticClass:"name-img"},[e("div",{staticClass:"song-name",on:{click:function(r){return t.playSong(i,l)}}},[t._v(" "+t._s(i.name)+" ")]),t.currentPlayingId==i.id&&t.isPlaying?e("img",{staticClass:"song-img",attrs:{src:r("37c5"),alt:"播放中"}}):t._e()]),t.currentPlayingId===i.id&&t.isPlaying?e("img",{staticClass:"play-icon",attrs:{src:r("df84"),alt:"暂停"},on:{click:function(r){return r.stopPropagation(),t.toggleSinglePlay(i)}}}):e("img",{staticClass:"play-icon",attrs:{src:r("57f5"),alt:"播放"},on:{click:function(r){return r.stopPropagation(),t.playSong(i,l)}}})])}))],2),e("div",{staticClass:"cus-btn",on:{click:t.togglePlayAllList}},[t._v(" "+t._s(t.playAllBtnText)+" ")])])]),e("el-dialog",{ref:"lyricDialog",staticClass:"lyric-dialog",attrs:{visible:t.lyricDialogVisible,title:"歌詞",top:"10vh","close-on-click-modal":!1,"append-to-body":!0},on:{"update:visible":function(i){t.lyricDialogVisible=i}}},[e("el-scrollbar",{ref:"lyricScroll",staticStyle:{height:"450px",width:"100%"}},[e("div",{staticClass:"lyrics-container"},t._l((null===(i=t.currentPlayingSong)||void 0===i?void 0:i.lyrics)||[],(function(i,r){return e("p",{key:r,ref:"lyric_"+r,refInFor:!0,class:{"active-lyric":t.currentLyricIndex===r}},[t._v(" "+t._s(i.text)+" ")])})),0)])],1)],1)},a=[function(){var i=this,t=i._self._c;return t("div",{staticClass:"wrapper"},[t("div",{staticClass:"logo"},[t("img",{staticClass:"music_img",attrs:{src:r("8bfe"),alt:""}})]),t("div",{staticClass:"user"},[t("img",{attrs:{src:r("c0fb"),alt:""}})])])}],n=(r("d9e2"),r("14d9"),r("e9f5"),r("910d"),r("7d54"),r("ab43"),{name:"App",data(){return{typeMusicList:[{name:"全て",lang:""},{name:"日本語",lang:"jp"},{name:"中国語",lang:"ch"},{name:"英語",lang:"en"},{name:"韓国語",lang:"kr"}],activeTypeIndex:0,songList:[{id:1,name:"ディスコネクトディスコ",audioUrl:"./audio/jp1.mp3",lang:"jp",lyrics:[],lrcUrl:"./lrc/jp1.lrc"},{id:2,name:"1022-比尔的歌",audioUrl:"./audio/ch1.mp3",lang:"ch",lyrics:[],lrcUrl:"./lrc/ch1.lrc"},{id:3,name:"看月亮爬上来",audioUrl:"./audio/ch2.mp3",lang:"ch",lyrics:[],lrcUrl:"./lrc/ch2.lrc"},{id:4,name:"深夜6時",audioUrl:"./audio/jp2.mp3",lang:"jp",lyrics:[],lrcUrl:"./lrc/jp2.lrc"},{id:5,name:"ラストハンチ",audioUrl:"./audio/jp3.mp3",lang:"jp",lyrics:[],lrcUrl:"./lrc/jp3.lrc"},{id:6,name:"达尔文",audioUrl:"./audio/ch3.mp3",lang:"ch",lyrics:[],lrcUrl:"./lrc/ch3.lrc"},{id:7,name:"lovestepを踏みたいの",audioUrl:"./audio/jp4.mp3",lang:"jp",lyrics:[],lrcUrl:"./lrc/jp4.lrc"},{id:8,name:"极昼",audioUrl:"./audio/ch4.mp3",lang:"ch",lyrics:[],lrcUrl:"./lrc/ch4.lrc"},{id:9,name:"マジか",audioUrl:"./audio/jp5.mp3",lang:"jp",lyrics:[],lrcUrl:"./lrc/jp5.lrc"},{id:10,name:"WINDSDAY",audioUrl:"./audio/jp6.mp3",lang:"jp",lyrics:[],lrcUrl:"./lrc/jp6.lrc"},{id:11,name:"一切合切",audioUrl:"./audio/jp7.mp3",lang:"jp",lyrics:[],lrcUrl:"./lrc/jp7.lrc"},{id:12,name:"红苹果",audioUrl:"./audio/ch5.mp3",lang:"ch",lyrics:[],lrcUrl:"./lrc/ch5.lrc"},{id:13,name:"坏情绪",audioUrl:"./audio/ch6.mp3",lang:"ch",lyrics:[],lrcUrl:"./lrc/ch6.lrc"},{id:14,name:"渇愛エチュード",audioUrl:"./audio/jp8.mp3",lang:"jp",lyrics:[],lrcUrl:"./lrc/jp8.lrc"},{id:15,name:"迁就",audioUrl:"./audio/ch7.mp3",lang:"ch",lyrics:[],lrcUrl:"./lrc/ch7.lrc"},{id:16,name:"小城",audioUrl:"./audio/ch8.mp3",lang:"ch",lyrics:[],lrcUrl:"./lrc/ch8.lrc"},{id:17,name:"ヘンゼルとグレーテル",audioUrl:"./audio/jp9.mp3",lang:"jp",lyrics:[],lrcUrl:"./lrc/jp9.lrc"},{id:18,name:"徘徊",audioUrl:"./audio/jp10.mp3",lang:"jp",lyrics:[],lrcUrl:"./lrc/jp10.lrc"},{id:19,name:"バカね",audioUrl:"./audio/jp11.mp3",lang:"jp",lyrics:[],lrcUrl:"./lrc/jp11.lrc"},{id:20,name:"天生一对",audioUrl:"./audio/ch9.mp3",lang:"ch",lyrics:[],lrcUrl:"./lrc/ch9.lrc"},{id:21,name:"ベルガモット",audioUrl:"./audio/jp12.mp3",lang:"jp",lyrics:[],lrcUrl:"./lrc/jp12.lrc"},{id:22,name:"大师球",audioUrl:"./audio/ch10.mp3",lang:"ch",lyrics:[],lrcUrl:"./lrc/ch10.lrc"},{id:23,name:"愿",audioUrl:"./audio/ch11.mp3",lang:"ch",lyrics:[],lrcUrl:"./lrc/ch11.lrc"},{id:24,name:"Drops",audioUrl:"./audio/jp13.mp3",lang:"jp",lyrics:[],lrcUrl:"./lrc/jp13.lrc"},{id:25,name:"ムーンライト",audioUrl:"./audio/jp14.mp3",lang:"jp",lyrics:[],lrcUrl:"./lrc/jp14.lrc"},{id:26,name:"消炎",audioUrl:"./audio/ch12.mp3",lang:"ch",lyrics:[],lrcUrl:"./lrc/ch12.lrc"},{id:27,name:"まつり",audioUrl:"./audio/jp15.mp3",lang:"jp",lyrics:[],lrcUrl:"./lrc/jp15.lrc"},{id:28,name:"愛の賞味期限",audioUrl:"./audio/jp16.mp3",lang:"jp",lyrics:[],lrcUrl:"./lrc/jp16.lrc"},{id:29,name:"Butter-fly",audioUrl:"./audio/jp17.mp3",lang:"jp",lyrics:[],lrcUrl:"./lrc/jp17.lrc"},{id:30,name:"认真的雪",audioUrl:"./audio/ch13.mp3",lang:"ch",lyrics:[],lrcUrl:"./lrc/ch13.lrc"},{id:31,name:"永不失联的爱",audioUrl:"./audio/ch14.mp3",lang:"ch",lyrics:[],lrcUrl:"./lrc/ch14.lrc"},{id:32,name:"이 유",audioUrl:"./audio/kr1.mp3",lang:"kr",lyrics:[],lrcUrl:"./lrc/kr1.lrc"},{id:33,name:"The Beginning",audioUrl:"./audio/en1.mp3",lang:"en",lyrics:[],lrcUrl:"./lrc/en1.lrc"},{id:34,name:"Seven(feat.Latto)",audioUrl:"./audio/en2.mp3",lang:"en",lyrics:[],lrcUrl:"./lrc/en2.lrc"},{id:35,name:"Betcha",audioUrl:"./audio/kr2.mp3",lang:"kr",lyrics:[],lrcUrl:"./lrc/kr2.lrc"},{id:36,name:"爱在西元前",audioUrl:"./audio/ch15.mp3",lang:"ch",lyrics:[],lrcUrl:"./lrc/ch15.lrc"}],currentPlayingId:null,currentPlayingSong:null,currentPlayIndex:-1,isPlaying:!1,currentTime:0,duration:0,playMode:"list",playAllBtnText:"プレイリスト全て",audio:null,audioErrorHandler:null,currentLyricIndex:-1,lyricDialogVisible:!1}},mounted(){this.audio=new Audio,this.audio.addEventListener("ended",this.handlePlayEnd),this.audio.addEventListener("timeupdate",this.handleTimeUpdate),console.log("纯JS音频对象初始化完成"),localStorage.removeItem("musicPlayerSongs")},beforeDestroy(){this.audio&&(this.audio.removeEventListener("ended",this.handlePlayEnd),this.audio.removeEventListener("timeupdate",this.handleTimeUpdate),this.removeAudioErrorListener(),this.audio.pause(),this.audio.src="")},computed:{filteredSongs(){const i=this.typeMusicList[this.activeTypeIndex].lang;return this.songList.filter(t=>""===i||t.lang===i)}},methods:{parseLrc(i){if(!i)return[];const t=i.split("\n").map(i=>i.trim()).filter(i=>i&&/^\[\d{2}:\d{2}/.test(i)),r=/\[(\d{2}):(\d{2})\.(\d{2,3})\]\s*(.+)/,e=[];return t.forEach(i=>{r.lastIndex=0;const t=r.exec(i);if(t){const[,i,r,l,a]=t,n=2===l.length?10*Number(l):Number(l),s=60*Number(i)+Number(r)+n/1e3;a.trim().length>0&&e.push({time:s,text:a.trim()})}}),console.log("解析后的完整歌词：",e),e},loadLrc(i){return i.lrcUrl?fetch(i.lrcUrl).then(i=>{if(!i.ok)throw new Error("歌词加载失败："+i.status);return i.text()}).then(i=>this.parseLrc(i)).catch(t=>(console.error(`加载${i.name}歌词失败：`,t),[])):Promise.resolve([])},changeType(i){this.activeTypeIndex=i,this.stopAllPlay(),this.playAllBtnText="プレイリスト全て"},togglePlayAllList(){const i=this.filteredSongs;0!==i.length?this.isPlaying&&"list"===this.playMode?(this.audio.pause(),this.isPlaying=!1,this.playAllBtnText="プレイリスト全て"):(this.playMode="list",this.playSong(i[0],0),this.playAllBtnText="一時停止リスト全て"):this.$message.warning("現在のカテゴリーに曲がありません！")},playSong(i,t){this.audio&&(this.audio.pause(),this.removeAudioErrorListener()),this.currentPlayingId=i.id,this.currentPlayingSong=i,this.currentPlayIndex=t,this.currentLyricIndex=-1,this.loadLrc(i).then(t=>{this.$set(this.currentPlayingSong,"lyrics",t),this.lyricDialogVisible=t.length>0,console.log(`《${i.name}》歌词加载完成，数量：${t.length}`)}),this.audio.src=i.audioUrl,this.audio.load(),this.audioErrorHandler=t=>{this.$message.error(`音频播放失败：${i.name}（文件不存在或格式错误）`),console.error("音频错误：",t),this.isPlaying=!1},this.audio.addEventListener("error",this.audioErrorHandler),this.audio.onloadedmetadata=()=>{this.duration=this.audio.duration;const t=()=>{this.audio.play().then(()=>{this.isPlaying=!0,this.playAllBtnText="list"===this.playMode?"一時停止リスト全て":"プレイリスト全て",console.log(`《${i.name}》开始播放，时长：${this.formatTime(this.duration)}`)}).catch(t=>{"NotAllowedError"===t.name?(this.isPlaying=!1,this.$message.info(`《${i.name}》自动播放失败，请点击歌曲旁的播放图标手动播放`)):this.$message.error("播放失败："+t.message),console.error("播放错误：",t)})};setTimeout(t,50)}},toggleSinglePlay(i){this.currentPlayingId===i.id?this.isPlaying?(this.audio.pause(),this.isPlaying=!1,this.playAllBtnText=(this.playMode,"プレイリスト全て")):this.audio.play().then(()=>{this.isPlaying=!0,this.playAllBtnText="list"===this.playMode?"一時停止リスト全て":"プレイリスト全て"}).catch(i=>{this.$message.error("恢复播放失败："+i.message)}):this.playSong(i,this.filteredSongs.findIndex(t=>t.id===i.id))},handleTimeUpdate(){if(!this.isPlaying||!this.currentPlayingSong)return;this.currentTime=this.audio.currentTime;const i=this.currentPlayingSong.lyrics||[];if(0===i.length)return;let t=-1;const r=this.currentTime;for(let e=i.length-1;e>=0;e--)if(r>=i[e].time-.1){t=e;break}-1!==t&&t!==this.currentLyricIndex&&(this.currentLyricIndex=t,this.$nextTick(()=>{var i,r;const e=null===(i=this.$refs["lyric_"+t])||void 0===i?void 0:i[0],l=null===(r=this.$refs.lyricScroll)||void 0===r?void 0:r.wrap;if(e&&l){const i=e.offsetTop-l.clientHeight/2+e.offsetHeight/2;l.scrollTop=Math.max(0,i)}}))},handlePlayEnd(){this.isPlaying=!1;const i=this.filteredSongs;if("list"===this.playMode&&i.length>0){const t=(this.currentPlayIndex+1)%i.length;this.playSong(i[t],t)}else this.stopAllPlay(),this.playAllBtnText="プレイリスト全て"},stopAllPlay(){this.audio&&(this.audio.pause(),this.audio.src="",this.removeAudioErrorListener()),this.isPlaying=!1,this.currentPlayingId=null,this.currentPlayingSong=null,this.currentPlayIndex=-1,this.currentLyricIndex=-1,this.lyricDialogVisible=!1,this.currentTime=0,this.duration=0},removeAudioErrorListener(){this.audio&&this.audioErrorHandler&&(this.audio.removeEventListener("error",this.audioErrorHandler),this.audioErrorHandler=null)},formatTime(i){if(!i||isNaN(i))return"00:00";const t=Math.floor(i/60).toString().padStart(2,"0"),r=Math.floor(i%60).toString().padStart(2,"0");return`${t}:${r}`}}}),s=n,o=(r("76b9"),r("4dd1"),r("2877")),c=Object(o["a"])(s,l,a,!1,null,"75f22125",null),d=c.exports,u=r("8c4f"),h=function(){var i,t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[t._m(0),e("el-card",{staticClass:"box-card"},[e("ul",{staticClass:"music_content"},t._l(t.typeMusicList,(function(i,r){return e("li",{key:r,staticClass:"music_name",class:{active:t.activeTypeIndex===r},on:{click:function(i){return t.changeType(r)}}},[t._v(" "+t._s(i.name)+" ")])})),0),e("div",{staticClass:"music"},[e("div",{staticClass:"music_list"},[0==t.filteredSongs.length?e("div",{staticClass:"empty-tip"},[t._v(" 現在のカテゴリーに曲がありません ")]):t._l(t.filteredSongs,(function(i,l){return e("div",{key:i.id,staticClass:"song-item"},[e("div",{staticClass:"name-img"},[e("div",{staticClass:"song-name",on:{click:function(r){return t.playSong(i,l)}}},[t._v(" "+t._s(i.name)+" ")]),t.currentPlayingId==i.id&&t.isPlaying?e("img",{staticClass:"song-img",attrs:{src:r("37c5"),alt:"播放中"}}):t._e()]),t.currentPlayingId===i.id&&t.isPlaying?e("img",{staticClass:"play-icon",attrs:{src:r("df84"),alt:"暂停"},on:{click:function(r){return r.stopPropagation(),t.toggleSinglePlay(i)}}}):e("img",{staticClass:"play-icon",attrs:{src:r("57f5"),alt:"播放"},on:{click:function(r){return r.stopPropagation(),t.playSong(i,l)}}})])}))],2),e("div",{staticClass:"cus-btn",on:{click:t.togglePlayAllList}},[t._v(" "+t._s(t.playAllBtnText)+" ")])])]),e("el-dialog",{ref:"lyricDialog",staticClass:"lyric-dialog",attrs:{visible:t.lyricDialogVisible,title:"歌詞",top:"10vh","close-on-click-modal":!1,"append-to-body":!0},on:{"update:visible":function(i){t.lyricDialogVisible=i}}},[e("el-scrollbar",{ref:"lyricScroll",staticStyle:{height:"400px",width:"100%"}},[e("div",{staticClass:"lyrics-container"},t._l((null===(i=t.currentPlayingSong)||void 0===i?void 0:i.lyrics)||[],(function(i,r){return e("p",{key:r,ref:"lyric_"+r,refInFor:!0,class:{"active-lyric":t.currentLyricIndex===r}},[t._v(" "+t._s(i.text)+" ")])})),0)])],1)],1)},p=[function(){var i=this,t=i._self._c;return t("div",{staticClass:"wrapper"},[t("div",{staticClass:"user"},[t("img",{attrs:{src:r("c0fb"),alt:""}})]),t("div",{staticClass:"logo"},[t("img",{staticClass:"music_img",attrs:{src:r("624b"),alt:""}})])])}],g={name:"App",data(){return{typeMusicList:[{name:"全て",lang:""},{name:"日本語",lang:"jp"},{name:"中国語",lang:"ch"},{name:"英語",lang:"en"},{name:"韓国語",lang:"kr"}],activeTypeIndex:0,songList:[{id:1,name:"ディスコネクトディスコ",audioUrl:"./audio/ディスコネクトディスコ.mp3",lang:"jp",lyrics:[],lrcUrl:"./lrc/ディスコネクトディスコ.lrc"}],currentPlayingId:null,currentPlayingSong:null,currentPlayIndex:-1,isPlaying:!1,currentTime:0,duration:0,playMode:"list",playAllBtnText:"プレイリスト全て",audio:null,audioErrorHandler:null,currentLyricIndex:-1,lyricDialogVisible:!1}},mounted(){this.audio=new Audio,this.audio.addEventListener("ended",this.handlePlayEnd),this.audio.addEventListener("timeupdate",this.handleTimeUpdate),console.log("纯JS音频对象初始化完成"),localStorage.removeItem("musicPlayerSongs")},beforeDestroy(){this.audio&&(this.audio.removeEventListener("ended",this.handlePlayEnd),this.audio.removeEventListener("timeupdate",this.handleTimeUpdate),this.removeAudioErrorListener(),this.audio.pause(),this.audio.src="")},computed:{filteredSongs(){const i=this.typeMusicList[this.activeTypeIndex].lang;return this.songList.filter(t=>""===i||t.lang===i)}},methods:{parseLrc(i){if(!i)return[];const t=i.split("\n").filter(i=>i.trim()&&i.startsWith("[00:")),r=/\[(\d{2}):(\d{2})\.(\d{2,3})\]\s*(.+)/g,e=[];return t.forEach(i=>{const t=r.exec(i);if(t){const[,i,r,l,a]=t,n=60*Number(i)+Number(r)+Number(l)/1e3;a.trim()&&e.push({time:n,text:a.trim()})}}),console.log("解析后的歌词：",e),e},loadLrc(i){return i.lrcUrl?fetch(i.lrcUrl).then(i=>{if(!i.ok)throw new Error("歌词加载失败："+i.status);return i.text()}).then(i=>this.parseLrc(i)).catch(t=>(console.error(`加载${i.name}歌词失败：`,t),[])):Promise.resolve([])},changeType(i){this.activeTypeIndex=i,this.stopAllPlay(),this.playAllBtnText="プレイリスト全て"},togglePlayAllList(){const i=this.filteredSongs;0!==i.length?this.isPlaying&&"list"===this.playMode?(this.audio.pause(),this.isPlaying=!1,this.playAllBtnText="プレイリスト全て"):(this.playMode="list",this.playSong(i[0],0),this.playAllBtnText="一時停止リスト全て"):this.$message.warning("現在のカテゴリーに曲がありません！")},playSong(i,t){this.audio&&(this.audio.pause(),this.removeAudioErrorListener()),this.currentPlayingId=i.id,this.currentPlayingSong=i,this.currentPlayIndex=t,this.currentLyricIndex=-1,this.loadLrc(i).then(t=>{this.$set(this.currentPlayingSong,"lyrics",t),this.lyricDialogVisible=t.length>0,console.log(`《${i.name}》歌词加载完成，数量：${t.length}`)}),this.audio.src=i.audioUrl,this.audio.load(),this.audioErrorHandler=t=>{this.$message.error(`音频播放失败：${i.name}（文件不存在或格式错误）`),console.error("音频错误：",t),this.isPlaying=!1},this.audio.addEventListener("error",this.audioErrorHandler),this.audio.onloadedmetadata=()=>{this.duration=this.audio.duration;const t=()=>{this.audio.play().then(()=>{this.isPlaying=!0,this.playAllBtnText="list"===this.playMode?"一時停止リスト全て":"プレイリスト全て",console.log(`《${i.name}》开始播放，时长：${this.formatTime(this.duration)}`)}).catch(t=>{"NotAllowedError"===t.name?(this.isPlaying=!1,this.$message.info(`《${i.name}》自动播放失败，请点击歌曲旁的播放图标手动播放`)):this.$message.error("播放失败："+t.message),console.error("播放错误：",t)})};setTimeout(t,50)}},toggleSinglePlay(i){this.currentPlayingId===i.id?this.isPlaying?(this.audio.pause(),this.isPlaying=!1,this.playAllBtnText=(this.playMode,"プレイリスト全て")):this.audio.play().then(()=>{this.isPlaying=!0,this.playAllBtnText="list"===this.playMode?"一時停止リスト全て":"プレイリスト全て"}).catch(i=>{this.$message.error("恢复播放失败："+i.message)}):this.playSong(i,this.filteredSongs.findIndex(t=>t.id===i.id))},handleTimeUpdate(){if(!this.isPlaying||!this.currentPlayingSong)return;this.currentTime=this.audio.currentTime;const i=this.currentPlayingSong.lyrics||[];if(0===i.length)return;let t=-1;const r=this.currentTime;for(let e=0;e<i.length;e++){const l=i[e].time,a=e<i.length-1?i[e+1].time:1/0;if(r>=l-.2&&r<a){t=e;break}}-1!==t&&t!==this.currentLyricIndex&&(this.currentLyricIndex=t,this.$nextTick(()=>{var i,r;const e=null===(i=this.$refs["lyric_"+t])||void 0===i?void 0:i[0],l=(null===(r=this.$refs.lyricScroll)||void 0===r?void 0:r.wrap)||(null===e||void 0===e?void 0:e.parentElement);if(e&&l){const i=e.offsetTop-l.clientHeight/2+e.offsetHeight/2;l.scrollTo({top:i,behavior:"smooth"})}}))},handlePlayEnd(){this.isPlaying=!1;const i=this.filteredSongs;if("list"===this.playMode&&i.length>0){const t=(this.currentPlayIndex+1)%i.length;this.playSong(i[t],t)}else this.stopAllPlay(),this.playAllBtnText="プレイリスト全て"},stopAllPlay(){this.audio&&(this.audio.pause(),this.audio.src="",this.removeAudioErrorListener()),this.isPlaying=!1,this.currentPlayingId=null,this.currentPlayingSong=null,this.currentPlayIndex=-1,this.currentLyricIndex=-1,this.lyricDialogVisible=!1,this.currentTime=0,this.duration=0},removeAudioErrorListener(){this.audio&&this.audioErrorHandler&&(this.audio.removeEventListener("error",this.audioErrorHandler),this.audioErrorHandler=null)},formatTime(i){if(!i||isNaN(i))return"00:00";const t=Math.floor(i/60).toString().padStart(2,"0"),r=Math.floor(i%60).toString().padStart(2,"0");return`${t}:${r}`}}},m=g,y=(r("0c48"),r("8f4a"),Object(o["a"])(m,h,p,!1,null,"4ace2c08",null)),f=y.exports;e["default"].use(u["a"]);const v=[{path:"/",name:"Home",component:f},{path:"/about",name:"About",component:()=>r.e("about").then(r.bind(null,"f820"))}],A=new u["a"]({mode:"history",base:"",routes:v});var P=A,U=r("5c96"),x=r.n(U);r("0fae");e["default"].config.productionTip=!1,e["default"].use(x.a),new e["default"]({router:P,render:i=>i(d)}).$mount("#app")},"57f5":function(i,t){i.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAANFJREFUOE+tk10OATEUhc8xwuvshCURG2AHrIANCEtiJzwS48idtM3VjIiOPjSdzD1fz/0p0XOxSy9pC2CZ/duRXOXxbwBJEwAnAEcAC5JPE0gaANgDmAGYkjxHUAI48Zjk/YOzEYCbh3iAACSxpKFBSD48TFILIdlq2y3kXJOcx2BJBrS1JrnJIAcAF6tJBFhwFXMO0AiwzyvJ2sGtJo25SIB47nCQLvcx5vC/gL4p2OCUF9EVzbexCm1svrYxAOIUlg1SBvl9lDObZY+p5GW/AG+GnhFiaX+HAAAAAElFTkSuQmCC"},"5ab9":function(i,t,r){},"624b":function(i,t,r){i.exports=r.p+"static/img/up-logo.5cc61719.png"},7236:function(i,t,r){},"73e9":function(i,t,r){},"76b9":function(i,t,r){"use strict";r("73e9")},"8bfe":function(i,t,r){i.exports=r.p+"static/img/up-logo2.fae29fa5.png"},"8f4a":function(i,t,r){"use strict";r("5ab9")},a78a:function(i,t,r){i.exports=r.p+"static/img/title-img.940f90a0.png"},c0fb:function(i,t,r){i.exports=r.p+"static/img/avator.10beb4c6.jpg"},df84:function(i,t){i.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAaNJREFUWEfNl7suRkEQx3//AjWRUEuIN3CJy1dplKj03sAlkSgkEpc30KtQalRucXkDIVGTCLVPMbLJHjn2OzeOWNvuzsxvZmdmZ0Xkpcj2qQxgZu7sBDANjAD9QKd34BW4B66AI+BMklVxrhTAG54BNoCBKkqBO2AVOCwDKQQwsz5gDxiuaDg8dg3MS3rIk88FMLMGsA90/9B4IvYMzEk6ydKTCeCNHwNtNY0n4u/AVBZEC4AP+80veB6yu0gMhdfxBcAn3GWNOy8LmMuJ0XRihgCz/t7LFNXZd/lwkCj4BPDe3xaUWhNYA3YlubpvWWbm+sICsA6051C6Eh1MopAGmAQyM9UrWpG0VcV1M1sGNgvONiSduv00wDawWCDUled5KOMj8VKga0fSUghwDozlNgyptGumZc2sqBVfSBoPAR6Bnj8CeJLUGwK8FSQO+t0INCV1/DuA6FcQPQmjl2H0RuTqPF4rdiVhZvEeIw/gohDvOfYQbg6MM5AkbTjqSBZAxBlKUxDxxvIUhEvMOB+T4H2P8zWrMoLVOfOtKaeOoTzZD7j63iFkmgaFAAAAAElFTkSuQmCC"}});